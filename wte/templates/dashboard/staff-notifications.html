{% extends "base.html" %}

{% block content %}
{% include "dashboard/navbar.html" %}
<div class="main-with-sidebar">
    <div class="container py-5">
        <div class="notification-header">
            <h1>All Notifications</h1>
            <form method="post" class="mark-all-form">
                {% csrf_token %}
                <button type="submit" name="mark_all" value="1" class="mark-all-btn">
                    Mark all as read
                </button>
            </form>
        </div>

        <ul class="notifications-list">
            {% for notification in notifications %}
            <li class="notification-item{% if notification.is_read %} read{% endif %}">
                <form method="post" class="mark-read-form" style="display: inline;">
                    {% csrf_token %}
                    <input type="hidden" name="notification_id" value="{{ notification.id }}">
                    <button type="submit" class="mark-read-btn" style="background: none; border: none; padding: 0;"></button>
                </form>
                <div class="notification-content">
                    <strong>{{ notification.get_type_display }}:</strong>
                    {{ notification.message }}
                    <div class="notification-meta">
                        {{ notification.created_at }} â€” from {{ notification.user.get_full_name|default:notification.user.username }}
                    </div>
                </div>
            </li>
            {% empty %}
            <li class="notification-item empty">No notifications yet.</li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}


<!-- TODO
1. marked as read
2. redesign page 
-->