{% extends "base.html" %}

{% block content %}
{% include "dashboard/navbar.html" %}
<div class="main-with-sidebar">
    <div class="container py-5">
        <div class="notification-header">
            <h1>All Notifications</h1>
            <div style="display: flex; gap: 10px; align-items: center;">
                <form method="post" class="mark-all-form">
                    {% csrf_token %}
                    <button type="submit" name="mark_all" value="1" class="mark-all-btn">
                        Mark all as read
                    </button>
                </form>
                <form method="post" class="clear-all-form">
                    {% csrf_token %}
                    <button type="submit" name="clear_all" value="1" class="clear-all-btn">
                        Clear All Notifications
                    </button>
                </form>
            </div>
        </div>

        <ul class="notifications-list">
            {% for notification in notifications %}
            <li class="notification-item{% if notification.is_read %} read{% endif %}">
                <form method="post" class="delete-form">
                    {% csrf_token %}
                    <input type="hidden" name="delete_id" value="{{ notification.id }}">
                    <button type="submit" class="delete-btn" title="Delete notification">
                        âœ•
                    </button>
                </form>
                <div class="notification-content">
                    <strong>{{ notification.get_type_display }}:</strong>
                    {{ notification.message }}
                    <div class="notification-meta">
                        {{ notification.created_at }}
                    </div>
                </div>
            </li>
            {% empty %}
            {% if notifications.exists %}
            <li class="notification-item empty">No notifications match your filters.</li>
            {% else %}
            <li class="clear-notification-item empty caught-up">
                You're all caught up! ðŸ¥³
            </li>
            {% endif %}
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}